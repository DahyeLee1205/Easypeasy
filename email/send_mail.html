<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- include libraries(jQuery, bootstrap) -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <!-- include summernote css/js -->
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <title>EasyPeasy-mail</title>
<style>
    #mail_side_bar{width: 200px; height: 1000px; float: left; border-right: 2px solid rgb(185, 187, 221); padding: 10px;}
    #mail_content{width: 1000px; float: left;}
    #mail_header{height: 130px; border-bottom: 2px solid rgb(185, 187, 221); margin: 10px;}
    #header1{height: 90px;}

    #mail_content_text{height: 865px; padding: 0px 20px 0px 20px; overflow-y: auto;}
    #mail_header_info{font-size: 25px; float: left; margin: 20px;}
    #send_btnList{margin-left: 20px;}

    .detail_info_tr{height: 35px;}
    .detail_info_tr th{width: 120px; text-align: center; padding-bottom: 10px;}
    .detail_info_tr>th{font-size: 18px;}
    .detail_info_tr td{padding-bottom: 10px;}
    .detail_info_tr input[type=text]{width: 700px; height: 25px;}
    #attach_area{height: 100px; border: 2px dashed gray; background: whitesmoke; vertical-align: middle;}
    #no_attachment{width: 360px; margin: auto; display: block;}
    #in_attachments{width: 100%; max-height: 100px; padding-left: 20px; display: none;}
    #no_attachment img, #no_attachment div{float: left;}
    #no_attachment div{margin-left: 10px; line-height: 26px; font-size: 18px; font-weight: 600; color: gray;}
    #attach{width: 25px;}
    .attach_delete_btn{border: none;}

</style>
</head>
<body>
    <!-- 메일 사이드바 -->
    <div id="mail_side_bar">
        <h2>메일</h2>
        <button>메일 쓰기</button>
        <br><br>
        <div>
            즐겨찾기
            <img src=""><br>
            <div>안읽은 메일함</div>
            <div>중요 메일함</div>
            <div>작성중인 메일함</div>
        </div><br>
        <div>
            태그
            <div>안읽은 메일함</div>
            <div>중요 메일함</div>
            <div>작성중인 메일함</div>
            <div> + 태그 추가</div>
        </div><br>
        <div>
            메일함
            <img src=""><br>
            <div>안읽은 메일함 <img src=""></div>
            <div>중요 메일함 <img src=""></div>
            <div>작성중인 메일함 <img src=""></div>
            <div>안읽은 메일함 <img src=""></div>
            <div>중요 메일함 <img src=""></div>
            <div>작성중인 메일함 <img src=""></div><div>안읽은 메일함 <img src=""></div>
            <div>중요 메일함 <img src=""></div>
            <div>작성중인 메일함 <img src=""></div>
        </div>
        <br><br>
    </div>  

    <!-- 메일 컨텐트-->
    <div id="mail_content">
        <div id="mail_header">
            <div id="header1" style="width:100%; float:left">
                <div id="mail_header_info">
                    <b>메일 쓰기</b>
                </div>
                <br>
            </div>
            <div id="send_btnList">
                <button>보내기</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button>임시저장</button>&nbsp;
                <button>미리보기</button>&nbsp;
                <button>다시쓰기</button>
            </div>
        </div>
        <form id="mail_content_text" method="POST" enctype="multipart/form-data">
            <table id="send_info">
                <tr class="detail_info_tr">
                    <th>받은 사람</th>
                    <td style="width: 100px;"><input type="checkbox"> 나에게</td>
                    <td><input type="text"></td>
                    <td><button>주소록</button></td>
                </tr>
                <tr class="detail_info_tr">
                    <th>참 조</th>
                    <td></td>
                    <td><input type="text"></td>
                    <td><button>주소록</button></td>
                </tr>
                <tr class="detail_info_tr">
                    <th>제 목</th>
                    <td><input type="checkbox"> 중요</td>
                    <td colspan="2"><input style="width: 760px;" type="text"></td>
                </tr>
                <tr class="detail_info_tr">
                    <th>파일 첨부</th>
                    <td></td>
                    <td colspan="2" style="text-align: left;">
                        <button id="file_choose" type="button">파일 선택</button>
                        <button type="button">자료실</button>
                        <button id="file_delete" type="button">모두 삭제</button>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td colspan="2" id="attach_area">
                        <div id="no_attachment">
                            <img id="attach" src="images/attachment.png">
                            <div>첨부파일을 여기로 끌어다 옮겨주세요.</div>
                        </div>
                        <div id="in_attachments">
                        </div>
                        <input id="attach_files" type="file" multiple accept="image/*,text/*,audio/*,video.*,.hwp.,.zip" name="originNames" style="display: none;">
                    </td>
                </tr>
                <tr style="height: 20px;"></tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td colspan="2">
                        <textarea name="editordata" id="summernote">

                        </textarea>
                    </td>
                </tr>
            </table>
        </form>
    </div>

    <script>
        // 써머노트 에디터
        $(document).ready(function() {
            $('#summernote').summernote({
                height: 500,
                focus: true,
                lang: "ko-KR"
            });
        });

        // 에디터 내용이 비었는지 체크
        // if ($('#summernote').summernote('isEmpty')) {
        //     alert('editor content is empty');
        // }

        // 첨부파일 업로드1 (버튼 클릭 방식)
        let fileNames = [];
        let noAttach = document.getElementById("no_attachment");
        let inAttachs = document.getElementById("in_attachments");
        document.getElementById("file_choose").addEventListener('click', function(){
            let attachFile = document.getElementById("attach_files");
            attachFile.click();
            attachFile.addEventListener('change', function(){
                let vaildFile = attachFile.files.length >= 0;
                if(vaildFile){
                    inAttachs.innerText = ''
                    noAttach.style.display = "none";
                    for(let i=0; i<attachFile.files.length; i++){
                        inAttachs.innerHTML += "첨부파일명 : " + "<b>" + attachFile.files[i].name + "</b>" + "&nbsp;&nbsp;&nbsp; <br>"
                    };
                    inAttachs.style.overflowY = 'auto';
                    inAttachs.style.display = "block";
                }
            });  
        });

        // 첨부파일 업로드2 (Drag And Drop 방식)
        let uploadBox = document.querySelector('#attach_area');

        // 박스 안에 Drag를 하고 있을 때
        uploadBox.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.style.backgroundColor = 'rgb(185, 187, 221)';
        });
        
        // 박스 밖으로 Drag가 나갈 때
        uploadBox.addEventListener('dragleave', function(e) {
            this.style.backgroundColor = 'gainsboro';
        });
        
        // 박스 안에서 Drag를 Drop했을 때
        uploadBox.addEventListener('drop', function(e) {
            e.preventDefault();
            this.style.backgroundColor = 'gainsboro';
            let attachFile = e.dataTransfer.files
            let vaildFile = e.dataTransfer.types.indexOf('Files') >= 0;
            if(vaildFile){
                inAttachs.innerText = ''
                noAttach.style.display = "none";
                for(let i=0; i<attachFile.length; i++){
                    inAttachs.innerHTML += "<div>첨부파일명 : " + "<b>" + attachFile[i].name + "</b>" + "&nbsp;&nbsp;&nbsp;<br>"
                };
                inAttachs.style.overflowY = 'auto';
                inAttachs.style.display = "block";
            }
        });

        // 첨부파일 전체 삭제
        document.getElementById('file_delete').addEventListener('click', function(){
            let attachFile = document.getElementById("attach_files");
            attachFile.value = ''
            inAttachs.innerText = ''
            inAttachs.style.display = "none";
            noAttach.style.display = "block";
        });
    </script>
</body>
</html>